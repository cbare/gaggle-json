</script>

<p id="notice"><%= notice %></p>

<% if @doc==nil then %>

  <p><b>No matrix found with id: </b> <%=h @id %></p>

<% else %>

  <div class="gaggle-data">
    <p>
      <b>Name:</b>
      <span class="gaggle-name"><%= @doc["name"] %></span>
    </p>

    <% if @doc["type"] %>
    <p>
      <b>Type:</b>
      <%= @doc["type"] %>
    </p>
    <% end %>

    <% if @species then %>
    <p>
      <b>Species:</b>
      <span class="gaggle-species"><%=h @species %></span>
    </p>
    <% end %>

    <% if @size then %>
    <p>
      <b>Length:</b>
      <span class="gaggle-size"><%= @size %></span>
    </p>
    <% end %>

  </div> 

  <% if @doc.has_key? "description" %>
  <p>
    <b>Description:</b>
    <%= @doc["description"] %>
  </p>
  <% end %>

  <table id="matrix_table">
    <thead>
      <tr>
        <th></th>
      <%- for column in @doc["gaggle-data"]["columns"] -%>
        <th><%= column["name"] %></th>
      <%- end %></tr>
    </thead>
    <tbody>
      <% for r in 0..@row_count %>
      <tr>
        <td class="row-name"><%=h @doc["gaggle-data"]["row names"][r] %>
      <% for column in @doc["gaggle-data"]["columns"] -%>
        <td class="column-data"><%= column["values"][r] %></td>
      <%- end %></tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<%= link_to 'JSON', document_path(@id)%>
